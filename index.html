<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portfolio Baoussar Souhaib</title>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=VT323&family=Anton&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body class="intro">

    <nav class="warm-nav">
        <ul>
            <li><a href="#ancre-home" class="nav-link" id="nav-home">ACCUEIL</a></li>
            <li><a href="#ancre-about" class="nav-link" id="nav-about">PERSONNAGE</a></li>
            <li><a href="#ancre-quest1" class="nav-link" id="nav-quests">QUÊTES</a></li>
            <li><a href="#ancre-contact" class="nav-link" id="nav-contact">CONTACT</a></li>
        </ul>
    </nav>

    <main>

        <div id="ancre-home" class="ghost-anchor"></div>
        <section id="section-home" class="layer">
            <div class="content-wrapper home-bg">
                <div class="black-curtain"></div>
                <div class="center-content">
                    <h1 class="cozy-title">POR<span class="pixel-bulb">T</span>FOLIO</h1>
                    <p class="subtitle">Scrollez pour débuter l'aventure</p>
                </div>
            </div>
        </section>

        <div id="ancre-about" class="ghost-anchor"></div>
        <section id="section-about" class="layer">
            <div class="content-wrapper about-bg">
                <div class="rpg-interface">
                    <div class="char-preview-box">
                        <h3 class="pixel-label">AVATAR</h3>
                        <div class="sprite-viewer">
                            <button id="btn-left" class="arrow-btn" aria-label="Rotation gauche">◀</button>
                            <div class="sprite-frame">
                                <img id="char-sprite" src="avatar1.gif" alt="Personnage">
                            </div>
                            <button id="btn-right" class="arrow-btn" aria-label="Rotation droite">▶</button>
                        </div>
                        <p class="rotation-label">ROTATION</p>
                    </div>
                    <div class="char-stats-box">
                        <div class="stats-header">
                            <div class="stat-row">
                                <span class="label">NOM:</span>
                                <span class="value">L'ARTISAN</span>
                            </div>
                            <div class="stat-row">
                                <span class="label">CLASSE:</span>
                                <span class="value highlight">DEV FULLSTACK</span>
                            </div>
                            <div class="stat-row">
                                <span class="label">NIV:</span>
                                <span class="value">99</span>
                            </div>
                        </div>
                        <hr class="pixel-divider">
                        <div class="attributes-list">
                            <div class="attr-row">
                                <span class="attr-name">HTML/CSS</span>
                                <div class="attr-bar-container">
                                    <div class="attr-bar-fill" style="width: 90%;"></div>
                                </div>
                            </div>
                            <div class="attr-row">
                                <span class="attr-name">JS</span>
                                <div class="attr-bar-container">
                                    <div class="attr-bar-fill" style="width: 85%;"></div>
                                </div>
                            </div>
                            <div class="attr-row">
                                <span class="attr-name">DESIGN</span>
                                <div class="attr-bar-container">
                                    <div class="attr-bar-fill" style="width: 75%;"></div>
                                </div>
                            </div>
                            <div class="attr-row">
                                <span class="attr-name">CAFÉINE</span>
                                <div class="attr-bar-container">
                                    <div class="attr-bar-fill mana" style="width: 100%;"></div>
                                </div>
                            </div>
                        </div>
                        <div class="char-desc">
                            <p>"Équipez-moi pour booster vos projets web. Bonus passif : Code Propre."</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <div id="ancre-quest1" class="ghost-anchor"></div>
        <section id="section-quest1" class="layer">
            <div class="content-wrapper scratch-bg">
                <img src="scratch/main.png" class="hand-float left" alt="Main Gauche">
                <img src="scratch/main2.png" class="hand-float right" alt="Main Droite">

                <div class="orbit-system">
                    <div class="orbit-ring inner">
                        <div class="orbit-arm" style="--start: 0deg;"><img src="scratch/start.png" class="orbit-item" alt="Start"></div>
                        <div class="orbit-arm" style="--start: 51.4deg;"><img src="scratch/forever.png" class="orbit-item" alt="Forever"></div>
                        <div class="orbit-arm" style="--start: 102.8deg;"><img src="scratch/key.png" class="orbit-item" alt="Key"></div>
                        <div class="orbit-arm" style="--start: 154.2deg;"><img src="scratch/say.png" class="orbit-item" alt="Say"></div>
                        <div class="orbit-arm" style="--start: 205.6deg;"><img src="scratch/sound.png" class="orbit-item" alt="Sound"></div>
                        <div class="orbit-arm" style="--start: 257deg;"><img src="scratch/stop.png" class="orbit-item" alt="Stop"></div>
                        <div class="orbit-arm" style="--start: 308.4deg;"><img src="scratch/repeat.png" class="orbit-item" alt="Repeat"></div>
                    </div>
                    <div class="orbit-ring outer">
                        <div class="orbit-arm" style="--start: 25deg;"><img src="scratch/forever.png" class="orbit-item" alt="Forever"></div>
                        <div class="orbit-arm" style="--start: 76.4deg;"><img src="scratch/sound.png" class="orbit-item" alt="Sound"></div>
                        <div class="orbit-arm" style="--start: 127.8deg;"><img src="scratch/start.png" class="orbit-item" alt="Start"></div>
                        <div class="orbit-arm" style="--start: 179.2deg;"><img src="scratch/repeat.png" class="orbit-item" alt="Repeat"></div>
                        <div class="orbit-arm" style="--start: 230.6deg;"><img src="scratch/key.png" class="orbit-item" alt="Key"></div>
                        <div class="orbit-arm" style="--start: 282deg;"><img src="scratch/stop.png" class="orbit-item" alt="Stop"></div>
                        <div class="orbit-arm" style="--start: 333.4deg;"><img src="scratch/say.png" class="orbit-item" alt="Say"></div>
                    </div>
                </div>

                <div class="scratch-header">
                    <h2 class="scratch-title" id="magnet-title">
                        <span class="letter" style="--x:-80px; --y:-50px; --r:-20deg">S</span>
                        <span class="letter" style="--x:-40px; --y:60px;  --r:15deg">C</span>
                        <span class="letter" style="--x:0px;   --y:-80px; --r:-10deg">R</span>
                        <span class="letter" style="--x:50px;  --y:40px;  --r:30deg">A</span>
                        <span class="letter" style="--x:20px;  --y:-60px; --r:-5deg">T</span>
                        <span class="letter" style="--x:-60px; --y:20px;  --r:10deg">C</span>
                        <span class="letter" style="--x:80px;  --y:-30px; --r:-25deg">H</span>
                    </h2>
                    <p class="scratch-subtitle">PROJET RPG 2024-2025</p>
                </div>

                <div class="scratch-ui">
                    <a href="https://scratch.mit.edu/projects/VOTRE_ID_PROJET/" target="_blank" rel="noopener noreferrer" class="warm-btn scratch-btn">LANCER LE JEU</a>
                </div>
            </div>
        </section>

<div id="ancre-quest2" class="ghost-anchor"></div>
<section id="section-quest2" class="layer theme-cinema">
    <div class="content-wrapper cinema-bg">
        <div class="ceiling-light"></div>

        <div class="cinema-header">
            <h2 class="cinema-title">LA PROMOTION</h2>
            <p class="cinema-subtitle">"La partie n'est jamais celle qu'on pense jouer"</p>
            <a href="#" class="cinema-btn" id="watch-btn">REGARDER</a>
        </div>

        <div class="chess-marionettes">
            <div class="string left-string"><div class="pawn"></div></div>
            <div class="string right-string"><div class="pawn"></div></div>
        </div>

        <div class="promo-characters">
            <div class="char-wrapper left">
                <img src="promotion/ellande1.png" class="char-film" alt="Ellande">
            </div>
            <div class="char-wrapper right">
                <img src="promotion/jessy1.png" class="char-film" alt="Jessy">
            </div>
        </div>
    </div>
</section>

        <div id="ancre-contact" class="ghost-anchor"></div>
        <section id="section-contact" class="layer">
            <div class="content-wrapper contact-bg">
                <div class="paper-letter">
                    <h2>ENVOYER UNE LETTRE</h2>
                    <form id="contact-form">
                        <input type="email" id="email" name="email" placeholder="Votre adresse courriel" required>
                        <textarea id="message" name="message" placeholder="Votre message..." rows="4" required></textarea>
                        <button type="submit" class="warm-btn">POSTER</button>
                    </form>
                    <div id="form-message" class="form-feedback"></div>
                </div>
                <footer>© 2024 - Fait avec passion.</footer>
            </div>
        </section>

    </main>

    <script>
        // Désactiver la restauration automatique du scroll
        if ('scrollRestoration' in history) { 
            history.scrollRestoration = 'manual'; 
        }
        window.scrollTo(0, 0);
        
        document.addEventListener("DOMContentLoaded", () => {
            // ===== INTRO (4.8s) =====
            setTimeout(() => { 
                document.body.classList.remove('intro'); 
            }, 4800);

            // ===== NAVIGATION FLUIDE (CLICK) =====
            document.querySelectorAll('.nav-link').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
                    this.classList.add('active');

                    const targetId = this.getAttribute('href');
                    const targetElement = document.querySelector(targetId);
                    
                    if(targetElement){
                        targetElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }
                });
            });

            // ===== SURBRILLANCE AU SCROLL =====
            const anchors = [
                { id: 'ancre-home', navId: 'nav-home' },
                { id: 'ancre-about', navId: 'nav-about' },
                { id: 'ancre-quest1', navId: 'nav-quests' },
                { id: 'ancre-quest2', navId: 'nav-quests' },
                { id: 'ancre-contact', navId: 'nav-contact' }
            ];

            function updateActiveNav() {
                let current = '';
                const scrollPosition = window.scrollY + (window.innerHeight / 3);

                anchors.forEach(anchorObj => {
                    const element = document.getElementById(anchorObj.id);
                    if (element && element.offsetTop <= scrollPosition) {
                        current = anchorObj.navId;
                    }
                });

                // Si on est en bas de page, forcer le contact
                if ((window.innerHeight + window.scrollY) >= document.body.offsetHeight - 50) {
                    current = 'nav-contact';
                }

                document.querySelectorAll('.nav-link').forEach(link => {
                    link.classList.remove('active');
                    if (link.id === current) {
                        link.classList.add('active');
                    }
                });
            }

            // Throttle pour optimiser les performances
            let scrollTimeout;
            window.addEventListener('scroll', () => {
                if (scrollTimeout) {
                    window.cancelAnimationFrame(scrollTimeout);
                }
                scrollTimeout = window.requestAnimationFrame(() => {
                    updateActiveNav();
                    
                    // Animations In-Page
                    const quest1 = document.getElementById('ancre-quest1');
                    const quest2 = document.getElementById('ancre-quest2');
                    
                    if (quest1 && window.scrollY >= quest1.offsetTop - 400) {
                        const titleEl = document.getElementById('magnet-title');
                        if (titleEl && !titleEl.classList.contains('assembled')) {
                            titleEl.classList.add('assembled');
                        }
                    }
                    
                    if (quest2 && window.scrollY >= quest2.offsetTop - 400) {
                        const wrapperEl = document.querySelector('#section-quest2 .content-wrapper');
                        if (wrapperEl && !wrapperEl.classList.contains('start-anim')) {
                            wrapperEl.classList.add('start-anim');
                        }
                    }
                });
            });

            // Appel initial
            updateActiveNav();

            // ===== SPRITE ROTATION SYSTEM =====
            const charSprite = document.getElementById('char-sprite');
            const btnLeft = document.getElementById('btn-left');
            const btnRight = document.getElementById('btn-right');
            
            // Définir les sprites (remplace par tes vraies images)
            const sprites = [
                'avatar1.gif',      // Vue de face
                'avatar-right.jpg',   // Vue de droite (si tu as)
                'avatar-back.jpg',    // Vue de dos (si tu as)
                'avatar-left.jpg'     // Vue de gauche (si tu as)
            ];
            
            let currentSpriteIndex = 0;
            
            function updateSprite() {
                // Vérifier que l'image existe, sinon garder la première
                const img = new Image();
                img.onerror = () => {
                    charSprite.src = sprites[0];
                };
                img.onload = () => {
                    charSprite.src = sprites[currentSpriteIndex];
                };
                img.src = sprites[currentSpriteIndex];
                
                // Flip horizontal pour le dernier sprite
                if (currentSpriteIndex === 3) {
                    charSprite.style.transform = "scaleX(-1)";
                } else {
                    charSprite.style.transform = "scaleX(1)";
                }
            }
            
            if(btnRight) {
                btnRight.addEventListener('click', () => {
                    currentSpriteIndex++;
                    if (currentSpriteIndex >= sprites.length) currentSpriteIndex = 0;
                    updateSprite();
                });
            }
            
            if(btnLeft) {
                btnLeft.addEventListener('click', () => {
                    currentSpriteIndex--;
                    if (currentSpriteIndex < 0) currentSpriteIndex = sprites.length - 1;
                    updateSprite();
                });
            }

            // ===== BOUTON REGARDER (CINEMA) =====
            const watchBtn = document.getElementById('watch-btn');
            if (watchBtn) {
                watchBtn.addEventListener('click', (e) => {
                    e.preventDefault();
                    // Remplace par l'URL de ta vidéo ou ton projet
                    const videoUrl = 'https://www.youtube.com/watch?v=wApGhhCeJzA';
                    window.open(videoUrl, '_blank');
                });
            }

            // ===== FORMULAIRE DE CONTACT =====
            const contactForm = document.getElementById('contact-form');
            const formMessage = document.getElementById('form-message');
            
            if (contactForm) {
                contactForm.addEventListener('submit', async (e) => {
                    e.preventDefault();
                    
                    const email = document.getElementById('email').value;
                    const message = document.getElementById('message').value;
                    
                    // Afficher un message de chargement
                    formMessage.textContent = 'Envoi en cours...';
                    formMessage.className = 'form-feedback loading';
                    
                    // Simulation d'envoi (remplace par ton backend)
                    setTimeout(() => {
                        // Succès simulé
                        formMessage.textContent = '✓ Message envoyé avec succès !';
                        formMessage.className = 'form-feedback success';
                        contactForm.reset();
                        
                        // Cache le message après 5 secondes
                        setTimeout(() => {
                            formMessage.textContent = '';
                            formMessage.className = 'form-feedback';
                        }, 5000);
                    }, 1500);
                    
                    /* POUR UN VRAI ENVOI, utilise quelque chose comme :
                    try {
                        const response = await fetch('ton-api-endpoint.php', {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({ email, message })
                        });
                        
                        if (response.ok) {
                            formMessage.textContent = '✓ Message envoyé !';
                            formMessage.className = 'form-feedback success';
                            contactForm.reset();
                        } else {
                            throw new Error('Erreur serveur');
                        }
                    } catch (error) {
                        formMessage.textContent = '✗ Erreur lors de l\'envoi. Réessayez.';
                        formMessage.className = 'form-feedback error';
                    }
                    */
                });
            }
        });
    </script>
</body>
</html>