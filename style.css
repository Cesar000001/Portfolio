:root {
    --wood-dark: #5d4037;
    --wood-light: #8d6e63;
    --paper: #fff8e1;
    --gold: #ffd54f;
    --text-dark: #3e2723;
    --bulb-off: #4e342e;
}

html { 
    scroll-behavior: smooth;
    box-sizing: border-box;
}

*, *:before, *:after { 
    box-sizing: inherit; 
}

body {
    margin: 0;
    padding: 0;
    font-family: 'VT323', monospace;
    background-color: #2c1e14;
    color: var(--paper);
    overflow-x: hidden; 
    background-image: linear-gradient(rgba(255, 255, 255, 0.03) 50%, transparent 50%);
    background-size: 100% 4px;
    min-height: 100vh;
}


.warm-nav {
    position: fixed; top: 0; width: 100%; z-index: 1000;
    padding: 25px 0; background: transparent; transition: opacity 2s ease;
}
.warm-nav ul { display: flex; justify-content: center; gap: 50px; list-style: none; margin: 0; padding: 0; }
.warm-nav a {
    color: rgba(255,255,255,0.6); text-decoration: none; font-family: 'Press Start 2P'; font-size: 1.1rem;
    text-shadow: 2px 2px 4px #000; transition: all 0.3s; position: relative; padding-bottom: 5px;
}
.warm-nav a:hover { color: var(--gold); text-shadow: 0 0 15px var(--gold); transform: scale(1.05); }
.warm-nav a.active { color: var(--gold); text-shadow: 0 0 20px var(--gold); opacity: 1; }
.warm-nav a.active::after {
    content: ''; position: absolute; bottom: 0; left: 50%; transform: translateX(-50%);
    width: 80%; height: 3px; background-color: var(--gold); box-shadow: 0 0 10px var(--gold);
}


.ghost-anchor { position: relative; width: 100%; height: 1px; visibility: hidden; margin-top: -1px; }


main { position: relative; width: 100%; }
.layer {
    position: -webkit-sticky; position: sticky; top: 0; height: 130vh; width: 100%;
    display: flex; flex-direction: column; justify-content: flex-start; align-items: center;
    overflow: hidden; box-shadow: 0 -25px 80px rgba(0,0,0,1); background-color: #2c1e14;
}
#section-contact { height: 100vh; }
.content-wrapper {
    height: 100vh; width: 100%; position: relative; display: flex; flex-direction: column;
    justify-content: center; align-items: center; background-size: cover; background-position: center; overflow: hidden;
}

#section-home   { z-index: 10; }
#section-about  { z-index: 20; }
#section-board  { z-index: 25; }
#section-quest1 { z-index: 30; }    
#section-quest2 { z-index: 40; } 
#section-contact{ z-index: 100; } 


.home-bg { background-image: url('soleil.jpg'); image-rendering: pixelated; background-color: #1a120b; }
.center-content { text-align: center; position: relative; z-index: 10; }
.cozy-title {
    font-family: 'Press Start 2P'; font-size: clamp(5rem, 9vw, 12rem); color: var(--paper);
    text-shadow: 4px 4px 0 #3e2723; margin-bottom: 20px; display: flex; align-items: center; justify-content: center; flex-wrap: wrap; gap: 10px;
}

.pixel-bulb {
    --wire-len: 50vh; position: relative; display: inline-block; margin: 0 45px; padding: 20px 15px 5px 15px;
    background: var(--gold); color: var(--text-dark); border-radius: 4px; border: 6px solid var(--wood-dark);
    box-shadow: 0 0 30px var(--gold); transform-origin: 50% calc(-1 * var(--wire-len));

    animation: bulb-swing 3s ease-in-out infinite alternate, bulb-flicker 3s infinite, intro-sequence 5s forwards;
    z-index: 20;
}
.pixel-bulb::before {
    content: ''; position: absolute; left: 50%; transform: translateX(-50%); bottom: 100%; height: var(--wire-len); width: 4px; background: var(--wood-dark); z-index: -1;
}

@keyframes intro-sequence {
    0% { background: var(--bulb-off); box-shadow: none; opacity: 0; color: #2c1e14; border-color: #3e2723; }
    20% { background: var(--bulb-off); box-shadow: none; opacity: 0; }
    30% { background: var(--gold); box-shadow: 0 0 10px var(--gold); opacity: 0.5; color: var(--text-dark); border-color: var(--wood-dark); }
    60% { background: var(--gold); box-shadow: 0 0 30px var(--gold); opacity: 1; }
    62% { background: var(--bulb-off); box-shadow: none; opacity: 0.5; color: #2c1e14; }
    64% { background: var(--gold); box-shadow: 0 0 30px var(--gold); opacity: 1; color: var(--text-dark); }
    66% { background: var(--bulb-off); box-shadow: none; opacity: 0.3; color: #2c1e14; }
    70% { background: var(--gold); box-shadow: 0 0 30px var(--gold); opacity: 1; }
    80% { background: var(--bulb-off); box-shadow: none; opacity: 0.1; color: #2c1e14; border-color: #3e2723; }
    95% { background: var(--bulb-off); box-shadow: none; opacity: 0.1; color: #2c1e14; }
    100% { background: var(--gold); box-shadow: 0 0 30px var(--gold); opacity: 1; color: var(--text-dark); border-color: var(--wood-dark); }
}
@keyframes bulb-swing { from { transform: rotate(-10deg); } to { transform: rotate(10deg); } }
@keyframes bulb-flicker { 0%, 100% { opacity: 1; } 81%, 87% { opacity: 0.8; } }

.
    background: #f4e7be; padding: 40px; border-radius: 2px; box-shadow: 0 0 50px rgba(0,0,0,0.7), inset 0 0 60px rgba(160, 110, 60, 0.2);
    position: relative; transform: rotate(-1deg); border: 1px solid #d4c59a;
}
.letter-title {
    font-family: 'Press Start 2P'; color: #5d4037; text-align: center; margin-bottom: 10px; font-size: clamp(1rem, 3vw, 1.5rem);
    border-bottom: 2px solid #5d4037; padding-bottom: 15px;
}
.letter-subtitle { font-family: 'VT323'; color: #8d6e63; text-align: center; font-size: 1.2rem; margin-bottom: 30px; font-style: italic; }
.input-group { position: relative; margin-bottom: 25px; }
.input-group label { font-family: 'Press Start 2P'; font-size: 0.6rem; color: #5d4037; display: block; margin-bottom: 8px; }
input, textarea {
    width: 100%; background: transparent; border: none; border-bottom: 2px solid #bcaaa4; font-family: 'VT323'; font-size: 1.5rem;
    color: #3e2723; padding: 10px 5px; outline: none; resize: none; transition: border-color 0.3s;
}
.ink-bar { position: absolute; bottom: 0; left: 0; width: 0; height: 2px; background: #d35400; transition: width 0.4s ease; }
input:focus ~ .ink-bar, textarea:focus ~ .ink-bar { width: 100%; }
input:focus, textarea:focus { border-bottom-color: transparent; }
.stamp-btn {
    width: 100%; margin-top: 20px; background: transparent; color: #c0392b; border: 4px solid #c0392b; padding: 15px;
    font-family: 'Press Start 2P'; font-size: 0.9rem; cursor: pointer; text-transform: uppercase; transition: all 0.2s; position: relative; overflow: hidden;
}
.stamp-btn:hover { background: #c0392b; color: #fff; transform: scale(1.02) rotate(1deg); box-shadow: 0 5px 15px rgba(192, 57, 43, 0.4); }
.stamp-btn:active { transform: scale(0.98); }
.form-feedback { margin-top: 20px; text-align: center; font-family: 'VT323'; font-size: 1.2rem; min-height: 20px; }
.success-msg { color: #27ae60; font-weight: bold; }
.error-msg { color: #c0392b; font-weight: bold; }
footer { width: 100%; text-align: center; padding: 20px; margin-top: 50px; color: rgba(255,255,255,0.4); font-size: 0.9rem; }


@media (max-width: 900px) {
    

    .layer, .content-wrapper {
        position: relative !important;
        height: auto !important;
        min-height: 100vh;
        overflow-y: visible;
        padding: 0 !important;
    }
    

    #section-home .content-wrapper { justify-content: center !important; }


    
    #section-quest1.layer, 
    #section-quest1 .content-wrapper {
        height: 100vh !important;
        overflow: hidden !important;
    }


    .scratch-header {
        position: absolute;
        top: 10%; 
        left: 50%;
        transform: translateX(-50%); 
        width: 100%;
        padding: 0 10px;
        z-index: 50;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
    }

    .scratch-title {
        display: flex;
        justify-content: center;
        flex-wrap: wrap;
        width: 100%;
        margin-bottom: 15px; 
    }

 
    .scratch-title .letter {
        font-size: 2.2rem; 
    }

    .scratch-subtitle {
        font-size: 1rem;
        color: #ffab19;
        text-align: center;
        width: 100%;
        background: rgba(0,0,0,0.5);
        padding: 5px 10px;
        border-radius: 4px;
    }


    .orbit-system {
        top: 55%;
        left: 50%;
        transform: translate(-50%, -50%) scale(0.45);
    }


    .hand-float {
        top: 55%; 
        width: 70px;
    }
    .hand-float.left { left: -10px; }
    .hand-float.right { right: -10px; }


    .scratch-ui {
        bottom: 12%; 
    }



    .warm-nav { padding: 10px 0; background: rgba(0,0,0,0.95); }
    .warm-nav ul { gap: 15px; flex-wrap: wrap; }
    .warm-nav a { font-size: 0.7rem; }

    .rpg-interface {
        flex-direction: column;
        width: 95%; max-width: 450px; margin: 80px auto 50px; gap: 20px;
    }
    .char-preview-box, .char-stats-box { width: 100%; padding: 20px; height: auto; }
    
    .wooden-board { margin-top: 80px; padding: 30px 15px; flex-direction: column; gap: 30px; }
    .quest-paper { width: 100%; transform: rotate(0deg) !important; margin: 0; }

    #section-quest2.layer, #section-quest2 .content-wrapper {
        height: 100vh !important; overflow: hidden; justify-content: center; padding-top: 0 !important;
    }
    .cinema-header { position: absolute; top: 15%; width: 100%; padding: 0 20px; z-index: 20; }
    .cinema-title { font-size: 2.5rem; margin-bottom: 10px; }
    
    .left-string { left: 15%; height: 55vh; }
    .right-string { right: 15%; height: 55vh; }
    .promo-characters { bottom: 10%; pointer-events: none; }
    .char-wrapper { width: 40%; max-width: 180px; }
    .char-wrapper.left { left: 15%; bottom: 0; transform: translateX(-50%); }
    .char-wrapper.right { right: 15%; bottom: 0; transform: translateX(50%) scaleX(-1); }
    

    .content-wrapper.contact-bg { justify-content: center; }
    .paper-content { transform: rotate(0deg); width: 95%; }
}

@media (max-width: 380px) {
    .scratch-title .letter { font-size: 1.8rem; }
    .scratch-subtitle { font-size: 0.8rem; }
    .orbit-system { transform: translate(-50%, -50%) scale(0.35); }
    .cinema-title { font-size: 2rem; }
}